<!DOCTYPE html>
<html lang="en">
<head>
<style>
	.parent-container {
		display: grid;
		place-items: center;
	  }
	body {background-color: lightblue; font-family: Arial}
	h5	{text-align: right;}
</style>

</head>

<body style='margin-top:20; margin-left:20; margin-right:20; '>

<h1> <b>WORD SHUFFLER GAME </b> </h1>

<!-- Main Component of the game -->
<form method="get" action="{% url 'shuffleword' %}">
	{% csrf_token %}
	<label for="Definition">Definition: {{meaning}}<span id="definition"></span></label> <br>
	<label for="Shuffled">Shuffled Word: {{shuffled_word}}<span id="shuffled_word"></span></label><br>
	<label for="UserInput">Original Word:</label>
	<input type="text" id="UserInput">
	<button type="submit" onclick="handleSubmit()">Submit</button><br>
	<label for="output" id="output">Result: {{output}}<span id="result"></span></label>
</form>

<br>
<br>

<script>

	// Function to check if the userinput is correct
	function handleSubmit() {
		event.preventDefault();

		// Get the input value
		var inputValue = document.getElementById('UserInput').value.toUpperCase();
		var originalInput ="{{random_word}}";

		// Compare the input value with the shuffled word
		if (originalInput === inputValue) {
			// Display output if they  match
			document.getElementById('result').textContent = "You are correct!";
		} else {
			// Display output if they don't match
			document.getElementById('result').textContent = "You are wrong! The correct answer is " + originalInput + ".";
		}
	}


	// Function to randomly select a word and definition
	function getRandomWord() {
		fetch("/shuffleword/")
			.then(response => response.json())
			.then(data => {
				document.getElementById('shuffled_word').textContent = data.shuffled_word;
				document.getElementById('definition').textContent = data.definition;
				document.getElementById('UserInput').value = "";
				document.getElementById('result').textContent = "";
				document.getElementById('randomWordForm').reset();
			})
			.catch(error => {
					console.error('Error:', error);
			});
}

document.getElementById('shufflerForm').addEventListener('submit', handleSubmit);
document.getElementById('shufflerForm').addEventListener('reset', getRandomWord);

</script>	

<!-- Button to randomly select another word and definition -->
<form id="randomWordForm" method="get" action="{% url 'shuffleword' %}">
    {% csrf_token %}
    <button onclick="getRandomWord">Guess Another Word</button>
</form>

<br>

<!-- Button to go to the homepage -->
<button type="button" onclick="window.location.href='http://192.168.1.196:8200/homepage';">Home</button>

</body>
</html>